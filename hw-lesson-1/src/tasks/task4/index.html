<!--
–ó–∞–¥–∞—á–∞ 4. "–†–∞—Ö—É–Ω–æ–∫ —É –±–∞–Ω–∫—É"
–í–∏–º–æ–≥–∏:
1) –°–ø–æ—á–∞—Ç–∫—É —Å—É–º–∞ –¥–æ—Ä—ñ–≤–Ω—é—î 0–≥—Ä–Ω. –ó–º—ñ–Ω–∏—Ç–∏ —Å—É–º—É —É –≥—Ä–∏–≤–Ω—è—Ö –º–æ–∂–Ω–∞ –∞–±–æ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫, –∞–±–æ –∑–Ω—è—Ç—Ç—è–º.
2) –°—É–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å—Å—è —É –¥–æ–ª–∞—Ä–∏ —Ç–∞ —î–≤—Ä–æ (—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –∫—É—Ä—Å –∑–∞–¥–∞—î—Ç—å—Å—è —É data).
3) –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å—É–º—É (–∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏, —â–æ–± –Ω–µ –±—É–ª–∞ –≤—ñ–¥'—î–º–Ω–æ—é)
4) –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–Ω—è—Ç–∏ (—â–æ–± –Ω–µ –º–æ–∂–Ω–∞ –∑–Ω—è—Ç–∏ –±—ñ–ª—å—à–µ –Ω—ñ–∂ —î –Ω–∞ —Ä–∞—Ö—É–Ω–∫—É)
5) –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–Ω—è—Ç—Ç—è —ñ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –≤–∏—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ 3% –≤—ñ–¥ —Å—É–º–∏ (–≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)

–ü—Ä–∏ –∑–º—ñ–Ω—ñ —Å—É–º–∏ :
- —è–∫—â–æ –±—É–ª–æ –∑–Ω—è—Ç—Ç—è, —Ç–æ —Å—É–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º
- —è–∫—â–æ –±—É–ª–æ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, —Ç–æ —Å—É–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∑–µ–ª–µ–Ω–∏–º
–Ø–∫—â–æ —Å—É–º–∞ –≤–∞–ª—é—Ç–∏ –º–µ–Ω—à–∞ –∑–∞ 100 —Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, —ñ–Ω–∞–∫—à–µ - –∑–µ–ª–µ–Ω–∏–º
-->
<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ó–∞–≤–¥–∞–Ω–Ω—è ‚Ññ 4 - –†–∞—Ö—É–Ω–æ–∫ —É –±–∞–Ω–∫—É</title>
    <link rel="stylesheet" href="../../shared/css/common.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="root"></div>

    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel" data-type="module">
      import {
        calculateBalances,
        calculateFee,
        canWithdraw,
        executeTransaction,
        getBalanceColor,
        getCurrencyColor,
      } from './js/bankCalculations.js'
      import { validateAmount } from './js/validation.js'

      function BankAccount() {
        const [balance, setBalance] = React.useState(0)
        const [amount, setAmount] = React.useState('')
        const [lastDeposit, setLastDeposit] = React.useState(null)

        const balances = calculateBalances(balance)
        const numericAmount = validateAmount(amount)
        const isValid = numericAmount !== null
        const fee = isValid ? calculateFee(numericAmount) : 0
        const canWithdrawAmount = isValid && canWithdraw(numericAmount, balance)

        const handleTransaction = isDeposit => {
          if (!isValid) return
          if (!isDeposit && !canWithdrawAmount) return

          const newBalance = executeTransaction(
            balance,
            numericAmount,
            isDeposit
          )
          setBalance(newBalance)
          setLastDeposit(isDeposit)
          setAmount('')
        }

        return (
          <div className="container">
            <header className="task-page-header">
              <h1>–ó–∞–≤–¥–∞–Ω–Ω—è ‚Ññ 4</h1>
              <p>–†–∞—Ö—É–Ω–æ–∫ —É –±–∞–Ω–∫—É</p>
            </header>{' '}
            <div className="task-description-text">
              <h3>üìù –û–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è:</h3>
              <p>
                <strong>"–†–∞—Ö—É–Ω–æ–∫ —É –±–∞–Ω–∫—É"</strong>
              </p>
              <p>
                <strong>–í–∏–º–æ–≥–∏:</strong>
              </p>
              <ol>
                <li>
                  –°–ø–æ—á–∞—Ç–∫—É —Å—É–º–∞ –¥–æ—Ä—ñ–≤–Ω—é—î 0–≥—Ä–Ω. –ó–º—ñ–Ω–∏—Ç–∏ —Å—É–º—É —É –≥—Ä–∏–≤–Ω—è—Ö –º–æ–∂–Ω–∞ –∞–±–æ
                  –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫, –∞–±–æ –∑–Ω—è—Ç—Ç—è–º.
                </li>
                <li>
                  –°—É–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å—Å—è —É –¥–æ–ª–∞—Ä–∏ —Ç–∞ —î–≤—Ä–æ (—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π
                  –∫—É—Ä—Å –∑–∞–¥–∞—î—Ç—å—Å—è —É data).
                </li>
                <li>
                  –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å—É–º—É (–∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏, —â–æ–± –Ω–µ –±—É–ª–∞
                  –≤—ñ–¥'—î–º–Ω–æ—é)
                </li>
                <li>
                  –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–Ω—è—Ç–∏ (—â–æ–± –Ω–µ –º–æ–∂–Ω–∞ –∑–Ω—è—Ç–∏ –±—ñ–ª—å—à–µ –Ω—ñ–∂ —î –Ω–∞ —Ä–∞—Ö—É–Ω–∫—É)
                </li>
                <li>
                  –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–Ω—è—Ç—Ç—è —ñ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –≤–∏—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ 3% –≤—ñ–¥
                  —Å—É–º–∏ (–≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
                </li>
              </ol>
              <p>
                <strong>–ü—Ä–∏ –∑–º—ñ–Ω—ñ —Å—É–º–∏ :</strong>
              </p>
              <ul>
                <li>—è–∫—â–æ –±—É–ª–æ –∑–Ω—è—Ç—Ç—è, —Ç–æ —Å—É–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º</li>
                <li>—è–∫—â–æ –±—É–ª–æ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è, —Ç–æ —Å—É–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∑–µ–ª–µ–Ω–∏–º</li>
              </ul>
              <p>
                –Ø–∫—â–æ —Å—É–º–∞ –≤–∞–ª—é—Ç–∏ –º–µ–Ω—à–∞ –∑–∞ 100 —Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º,
                —ñ–Ω–∞–∫—à–µ - –∑–µ–ª–µ–Ω–∏–º
              </p>
            </div>
            <div className="calculator-form">
              <div className="bank-card">
                <div className="balance-section">
                  <div className="balance-item primary">
                    <span>üí∞ –ë–∞–ª–∞–Ω—Å —Ä–∞—Ö—É–Ω–∫—É:</span>
                    <span
                      className={`balance-amount balance-${getBalanceColor(
                        lastDeposit
                      )}`}
                    >
                      {balances.uah} –≥—Ä–Ω
                    </span>
                  </div>
                  <div className="balance-item">
                    <span>üíµ –ë–∞–ª–∞–Ω—Å –≤ –¥–æ–ª–∞—Ä–∞—Ö:</span>
                    <span
                      className={`balance-amount balance-${getCurrencyColor(
                        balances.usd
                      )}`}
                    >
                      ${balances.usd}
                    </span>
                  </div>
                  <div className="balance-item">
                    <span>üí∂ –ë–∞–ª–∞–Ω—Å –≤ —î–≤—Ä–æ:</span>
                    <span
                      className={`balance-amount balance-${getCurrencyColor(
                        balances.eur
                      )}`}
                    >
                      ‚Ç¨{balances.eur}
                    </span>
                  </div>
                </div>

                <div className="form-group">
                  <label htmlFor="amount" className="form-label">
                    –°—É–º–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó:
                  </label>
                  <input
                    type="number"
                    id="amount"
                    className="form-input"
                    value={amount}
                    onChange={e => setAmount(e.target.value)}
                    placeholder="–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É..."
                    min="0.01"
                    step="0.01"
                  />
                </div>

                <div className="action-buttons">
                  <button
                    onClick={() => handleTransaction(true)}
                    disabled={!isValid}
                    className="btn-deposit"
                  >
                    üí∞ –ü–æ–ø–æ–≤–Ω–∏—Ç–∏
                  </button>
                  <button
                    onClick={() => handleTransaction(false)}
                    disabled={!isValid || !canWithdrawAmount}
                    className="btn-withdraw"
                  >
                    üí≥ –ó–Ω—è—Ç–∏
                  </button>
                </div>

                <div className="fee-info">
                  <span>üìä –ö–æ–º—ñ—Å—ñ—è –∑–∞ –æ–ø–µ—Ä–∞—Ü—ñ—é: </span>
                  <span className="fee-amount">{fee} –≥—Ä–Ω</span>
                </div>
              </div>
            </div>
            <nav className="navigation">
              <a href="../task3/index.html" className="nav-btn">
                ‚Üê –ü–æ–ø–µ—Ä–µ–¥–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è
              </a>
              <a href="../../index.html" className="nav-btn">
                üè† –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
              </a>
              <a href="../task5/index.html" className="nav-btn">
                –ù–∞—Å—Ç—É–ø–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Üí
              </a>
            </nav>
          </div>
        )
      }

      ReactDOM.render(<BankAccount />, document.getElementById('root'))
    </script>
  </body>
</html>
